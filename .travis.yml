language: python
python:
  - '3.6'
services:
  - mongodb
  - docker
install:
  - pip3 install --upgrade git+https://github.com/UCL-INGI/INGInious.git@v0.6
  - docker pull ingi/inginious-c-base:v0.6
  - docker pull ingi/inginious-c-default:v0.6
  - docker pull ingi/inginious-c-java8scala:v0.6
  # Dependencies for verification scripts
  - pip3 install -r requirements.txt
before_script:
  - python3 travis_setup.py
  - chmod +x check_requirements.py
script:
  - echo "Inginious Testing on your tasks + (Integration Testing on the generic runscript)"
  - inginious-autotest . LEPL1402 -l
  - echo "Consistence Testing on your tasks"
  - ./check_requirements.py
notifications:
  slack:
      on_success: change
      on_failure: always
